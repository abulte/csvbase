{# -*- mode: jinja2 -*- #}
{% extends "table.html" %}

{% block tab_contents %}
  <div class="container">
    {% if not is_public %}
    <h2>Private url</h2>
    <p>Your private url for this table is <a href="{{table_url}}"><code>{{table_url}}</code></a></p>
    {% endif %}

    <h2>Pandas</h2>
    <p>To load this dataset into <a href="https://pandas.pydata.org/">pandas</a>, do the following</p>
    {% if is_public %}
      <pre>import pandas
# you just use the same url as the table page
{{table_name|snake_case}} = pandas.read_csv("{{table_url}}")
</pre>
    {% else %}
      <pre>import pandas, requests
{{table_name|snake_case}} = pandas.read_csv(requests.get("{{table_url}}", stream=True).raw)
</pre>
    {% endif %}

    {% if not is_public %}
      <p><em>Please note, as <a href="{{ url_for('csvbase.get_table', username=username, table_name=table_name) }}">{{table_name}}</a> is private you need <strong>requests</strong> to work around pandas bug <a href="https://github.com/pandas-dev/pandas/issues/16716">#16716</a></em></p>
    {% endif %}

    <h2>R</h2>
    <p>To load this dataset into <a href="https://www.r-project.org/">R</a>, do the following</p>
    <pre># you just use the same url as the table page
{{table_name|snake_case}} &lt;- read.csv('{{table_url}}')</pre>

    <h2>ReST</h2>
    <h3>Getting the dataset</h3>
    <p>To download the dataset, just use it's url - the same as on the website</p>
    <pre>curl {{table_url}}</pre>
    <p>Or to save it to a file with curl, do:</p>
    <pre>curl {{table_url}} -o {{table_name|snake_case}}.csv</pre>
    <h3>Updating the dataset</h3>
    <p>After changing the dataset, send it back with the <code>PUT</code> HTTP Verb (as CSV)</p>
    <pre>curl -XPUT {{private_table_url}} --data-binary @{{table_name|snake_case}}.csv</pre>
  </div>
{% endblock %}

