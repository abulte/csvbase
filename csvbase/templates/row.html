{# -*- mode: jinja2 -*- #}
{% extends "base.html" %}

{% block main %}
  <div class="container">
    <h1><a href="{{ url_for('csvbase.user', username=username) }}">{{ username }}</a>/<a href="{{ url_for('csvbase.get_table', username=username, table_name=table_name) }}">{{ table_name }}</a>/rows/{{ row_id }}</h1>
  </div>
  <div class="container">
    {% if g.username != username %}
    <table class="table">
      <thead>
        <tr>
          <th>Column name</th>
          <th>Column type</th>
          <th>Column value</th>
        </tr>
      </thead>
      <tbody>
        {% for col, v in row %}
          <tr>
            <td>{{ col.name }}</td>
            <td>{{ col.pretty_type() }}</td>
            <td>{{ v }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <form >
        {% for col, v in row.items() %}
          <div class="form-group">
            <label>{{ col.name }}</label>
            <input
              type="{{ col.html_type() }}"
              name="{{ col_name }}" value="{{ v }}">
          </div>
        {% endfor %}
        <input type="submit" value="Update">
      </form>
    {% endif %}
  </div>
{% endblock %}
